<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="png/logo.png"/>
    <title>Truffled - Iframe</title>
    <meta name="title" content="Truffled - Iframe">
    <meta name="description" content="See that tiny window? Thats your game on Truffled!">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://truffled.lol/i">
    <meta property="og:title" content="Truffled - Iframe">
    <meta property="og:description" content="See that tiny window? Thats your game on Truffled!">
    <meta property="og:image" content="https://truffled.lol/png/logo.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://truffled.lol/i">
    <meta name="twitter:title" content="Truffled - Iframe">
    <meta name="twitter:description" content="See that tiny window? Thats your game on Truffled!">
    <meta name="twitter:image" content="https://truffled.lol/png/logo.png">
    <link rel="canonical" href="https://truffled.lol/i">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/battery.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="index-page">
    <div id="particles-js"></div>
    <div class="navbar-right">
        <a href="/"><img src="png/house-solid.svg" alt="Home"></a>
        <a href="g"><img src="png/gamepad-solid.svg" alt="Games"></a>
        <a href="t"><img src="png/tool.svg" alt="Tools"></a>
        <a href="https://discord.gg/vVqY36mzvj"><img src="png/other.svg" alt="Discord"></a>
        <a href="s"><img src="png/gear-solid.svg" alt="Settings"></a>
    </div>
    <div class="content">
        <div class="iframe-container">
            <iframe id="gameframe" class="gameframe" src="/404.html"></iframe>
            <div class="bottom-bar">
                <div class="iframeiconshere">
                    <a href="javascript:void(0)" id="fullscreen"><i class="fas fa-expand"></i></a>
                    <a href="javascript:void(0)" id="iframeicons" onclick="document.getElementById('gameframe').src = document.getElementById('gameframe').src;"><i class="fas fa-sync-alt"></i></a>
                    <a href="javascript:void(0)" id="copylink"><i class="fas fa-link"></i></a>
                    <a href="javascript:void(0)" id="discordchat"><i class="fab fa-discord"></i></a>
                    <a href="javascript:void(0)" id="aboutblank"><i class="fas fa-external-link-alt"></i></a>
                    <a href="javascript:void(0)" id="downloadgame"><i class="fas fa-download"></i></a>
                </div>
            </div>
        </div>
    </div>
    <script src="/js/panic.js"></script>
    <script src="/static/uv/uv.bundle.js" defer></script>
    <script src="/static/uv/uv.config.js" defer></script>
    <script src="/static/register-sw.js" defer></script>
    <script src="/js/right.js"></script>
</body>
<script>
document.getElementById('aboutblank').addEventListener('click', function() {
    const iframe = document.getElementById('gameframe');
    const currentUrl = iframe.src;
    
    if (currentUrl && currentUrl !== 'https://truffled.lol/404.html') {
        const win = window.open('about:blank');
        const doc = win.document;
        doc.open();
        doc.write('<iframe src="' + currentUrl + '" style="position:fixed;top:0;left:0;bottom:0;right:0;width:100%;height:100%;border:none;margin:0;padding:0;overflow:hidden;"></iframe>');
        doc.close();
        doc.title = 'New Tab';
    } else {
        const aboutBlankBtn = document.getElementById('aboutblank');
        const originalHTML = aboutBlankBtn.innerHTML;
        aboutBlankBtn.innerHTML = '<i class="fas fa-times"></i>';
        aboutBlankBtn.style.color = '#FF5722';
        setTimeout(() => {
            aboutBlankBtn.innerHTML = originalHTML;
            aboutBlankBtn.style.color = '';
        }, 1500);
    }
});
</script>
<script>
document.addEventListener("keydown", function(event) {
    if (event.key === "]") {
        window.location.href = "/extra/la.mov";
    }
});
</script>
<script>
function getUrlParameter(name) {
    name = name.replace(/[\[\]]/g, '\\$&');
    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');
    var results = regex.exec(location.href);
    if (!results) return '';
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, ' '));
}

var url = getUrlParameter('url');
if (url) {
    document.getElementById('gameframe').src = url;
}
</script>
<script>
document.getElementById('fullscreen').addEventListener('click', function () {
    var iframe = document.getElementById('gameframe');
    if (iframe.requestFullscreen) {
        iframe.requestFullscreen();
    } else if (iframe.mozRequestFullScreen) {
        iframe.mozRequestFullScreen();
    } else if (iframe.webkitRequestFullscreen) {
        iframe.webkitRequestFullscreen();
    } else if (iframe.msRequestFullscreen) {
        iframe.msRequestFullscreen();
    }
});
</script>
<script>
document.getElementById('copylink').addEventListener('click', function() {
    const copyBtn = document.getElementById('copylink');
    const originalHTML = copyBtn.innerHTML;
    const iframe = document.getElementById('gameframe');
    const currentUrl = iframe.src;
    if (currentUrl && !currentUrl.includes('/404.html')) {
        const fullUrl = window.location.origin + window.location.pathname + '?url=' + encodeURIComponent(currentUrl);
        navigator.clipboard.writeText(fullUrl).then(() => {
            copyBtn.innerHTML = '<i class="fas fa-check"></i>';
            copyBtn.classList.add('copied');
            setTimeout(() => {
                copyBtn.innerHTML = originalHTML;
                copyBtn.classList.remove('copied');
            }, 2000);
        }).catch(() => {
            const textArea = document.createElement('textarea');
            textArea.value = fullUrl;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);
            copyBtn.innerHTML = '<i class="fas fa-check"></i>';
            copyBtn.classList.add('copied');
            setTimeout(() => {
                copyBtn.innerHTML = originalHTML;
                copyBtn.classList.remove('copied');
            }, 2000);
        });
    } else {
        copyBtn.innerHTML = '<i class="fas fa-times"></i>';
        copyBtn.style.color = '#FF5722';
        setTimeout(() => {
            copyBtn.innerHTML = originalHTML;
            copyBtn.style.color = '';
        }, 1500);
    }
});
</script>
<script>
let discordChatLoaded = false;
let discordCrate = null;
    
document.getElementById('discordchat').addEventListener('click', function() {
    const discordBtn = document.getElementById('discordchat');
        
    if (!discordChatLoaded) {
        const script = document.createElement('script');
        script.src = 'https://cdn.jsdelivr.net/npm/@widgetbot/crate@3';
        script.async = true;
        script.defer = true;
            
        script.onload = function() {
            discordCrate = new Crate({
                server: '1400743472205398088',
                channel: '1412972643367518279' 
            });
            discordChatLoaded = true;
            discordBtn.classList.add('active');
        };
            
        document.head.appendChild(script);
    } else {
        if (discordCrate) {
            if (discordBtn.classList.contains('active')) {
                discordCrate.hide();
                discordBtn.classList.remove('active');
            } else {
                discordCrate.show();
                discordBtn.classList.add('active');
            }
        }
    }
});
</script>
      <script>
         let userInteracted = false;
         document.addEventListener('click', () => userInteracted = true);
         document.addEventListener('keydown', () => userInteracted = true);
         document.addEventListener('mousemove', () => userInteracted = true);

         window.addEventListener('beforeunload', function (e) {
         if (!userInteracted) return; 
         e.preventDefault();
         e.returnValue = ""; 
         });
      </script>
<script src="/js/file.js" defer></script>
</html>
<script>
   window.dataLayer = window.dataLayer || [];
   function gtag(){dataLayer.push(arguments);}
   gtag('js', new Date());
   gtag('config', 'G-WLTG1S4STB');
</script>
